### 

Bar数据计算



## Bar数据计算规则

### 最优价bar计算

1. 支持 `买bar`、`卖bar`、`中间件bar`。需要按照三种价格计算
2. 按照`GMT（格林尼治）`计算，可支持切换不同时区
   1. 切换不同时区需要支持冬夏令时
3. `天bar`以内 统一按照`GMT`时间计算,`天bar`以内频率展示，客户端需要实现自动偏移时区
4. `天bar`以上，比如：`天bar`、`周bar`、`月bar`、`年bar`行情接入时实时计算，需要分别计算出不同时区规则下的 bar，统一存储到表

## 注意点

1. 不同频率的`bar数据`落库的rowkey唯一主键 要保证重复，并保证幂等性，多次执行插入相同时区的 `bar数据`时，新的应该覆盖老的数据。
2. 多维度条件查询，需要支持按照不同频率、时区、合约、渠道、产品小类、实体查询
3. 

